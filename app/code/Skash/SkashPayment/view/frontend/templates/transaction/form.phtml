<?php
/**
 * Copyright Â© 2013-2017 Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */

/**
 * @var \Magento\Paypal\Block\Payflow\Link\Iframe $block
 * @see \Magento\Paypal\Block\Payflow\Link\Iframe
 */


// var_dump($block->getTransactionUrl());
// echo "--------- <br/>";
// var_dump($block->escapeUrl($block->getTransactionUrl()));
// echo "--------- <br/>";
// die('here inside transaction form tempalte');
// var_dump($block->getRequestFields());
// echo "<br/><br/>";
// var_dump($block->getTransactionQR());

// // print_r(json_encode($block->requestFields()));
// die;
?>
<html>
	<head>
	</head>
	<body>

		<?php
		$qrResponse = $block->getTransactionQR();
		if (isset($qrResponse['error'])) {
			echo $qrResponse['error'];
			//@todo show back button with a message
		} else {
			$tranID = $qrResponse['TranID'];
			$pictureURL = $qrResponse['PictureURL'];
			$returnText = $qrResponse['ReturnText'];
			switch ($qrResponse['Flag']) {
				case -1:
					echo __($returnText);
					break;
				case 10:
					echo __($returnText);
					//@todo show back button with a message
					break;
				case 2:
					echo __("Your order has been placed! Scan the QR with your sKash app to complete the payment.");
					echo "<img src='$pictureURL' alt='sKash QR code' title='sKash QR code'/>";
					break;
			}
		}

		?>

		<!-- @todo: get the response of the api call to display the QR image -->

		<<!-- form id="skash_form" name="skash_form" method="POST" action="<?php // echo $block->escapeUrl($block->getTransactionUrl()); ?>">
			<?php // foreach ($block->requestFields() as $fieldName => $fieldValue): ?>
				<input type="hidden" name="<?php // echo $block->escapeHtml($fieldName); ?>" value="<?php // echo $fieldValue; ?>"/>
			<?php // ndforeach;?>
		</form> -->

		<!-- @todo: add a back button -->

		<script>
		    // document.getElementById('skash_form').submit();
		</script>
	</body>
</html>
